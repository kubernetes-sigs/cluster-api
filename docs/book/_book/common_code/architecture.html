
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Architecture Â· The Cluster API Book</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="SIG Lifecycle Team">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panel/icons.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panel/panel.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codegroup/code.group.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="repository_layout.html" />
    
    
    <link rel="prev" href="../getting_started/existing_providers.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../getting_started/existing_providers.html">
            
                <a href="../getting_started/existing_providers.html">
            
                    
                    Existing Providers
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Common Code</li>
        
        
    
        <li class="chapter active" data-level="3.1" data-path="architecture.html">
            
                <a href="architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="repository_layout.html">
            
                <a href="repository_layout.html">
            
                    
                    Repository Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="cluster_controller.html">
            
                <a href="cluster_controller.html">
            
                    
                    Cluster Controller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="machine_controller.html">
            
                <a href="machine_controller.html">
            
                    
                    Machine Controller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="machineset_controller.html">
            
                <a href="machineset_controller.html">
            
                    
                    MachineSet Controller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="machinedeployment_controller.html">
            
                <a href="machinedeployment_controller.html">
            
                    
                    MachineDeployment Controller
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Creating a New Provider</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../provider_implementations/overview.html">
            
                <a href="../provider_implementations/overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../provider_implementations/naming.html">
            
                <a href="../provider_implementations/naming.html">
            
                    
                    Naming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../provider_implementations/generate_crds.html">
            
                <a href="../provider_implementations/generate_crds.html">
            
                    
                    Generate CRDs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../provider_implementations/register_schemes.html">
            
                <a href="../provider_implementations/register_schemes.html">
            
                    
                    Register Schemes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../provider_implementations/create_actuators.html">
            
                <a href="../provider_implementations/create_actuators.html">
            
                    
                    Create Actuators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../provider_implementations/register_controllers.html">
            
                <a href="../provider_implementations/register_controllers.html">
            
                    
                    Register Controllers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../provider_implementations/building_running_and_testing.html">
            
                <a href="../provider_implementations/building_running_and_testing.html">
            
                    
                    Building, Running, and Testing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Appendices</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../appendices/keps/0003-cluster-api.html">
            
                <a href="../appendices/keps/0003-cluster-api.html">
            
                    
                    Cluster API KEP
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Architecture</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="architecture">Architecture</h1>
<p><div class="panel panel-info"><div class="panel-heading"><div class="panel-icon"><i class="icon-info"></i></div><div class="panel-title">Background Information</div></div><div class="panel-content"><p>It may be useful to read at least the following chapters of the Kubebuilder 
book in order to better understand this section.</p>
<ul>
<li><a href="https://github.com/kubernetes-sigs/kubebuilder/blob/master/docs/book/basics/what_is_a_resource.md" target="_blank">What is a Resource</a></li>
<li><a href="https://github.com/kubernetes-sigs/kubebuilder/blob/master/docs/book/basics/what_is_a_controller.md" target="_blank">What is a Controller</a></li>
</ul>
</div></div></p>
<p><div class="panel panel-warning"><div class="panel-heading"><div class="panel-icon"><i class="icon-warning"></i></div><div class="panel-title">Architecture Diagram</div></div><div class="panel-content"><p>We need a new simple diagram here reflecting the move to CRDs.</p>
</div></div></p>
<p><img src="architecture.png" alt="Architecture"></p>
<h2 id="cluster-api-resources">Cluster API Resources</h2>
<p>The Cluster API currently defines the following resource types:</p>
<ul>
<li>Cluster</li>
<li>Machine</li>
<li>MachineSet</li>
<li>MachineDeployment</li>
<li>MachineClass</li>
</ul>
<h2 id="controllers-and-actuators">Controllers and Actuators</h2>
<p>A Kubernetes Controller is a routine running in a Kubernetes cluster that 
watches for create / update / delete events on Resources, and triggers a 
Reconcile function in response. Reconcile is a function that may be called
at any time with the Namespace and Name of an object (Resource instance), 
and it will attempt to make the cluster state match the state declared in the 
object <code>Spec</code>. </p>
<p>The Cluster API consists of a shared set of controllers in order to provide a 
consistent user experience. In order to support multiple cloud environments, 
some of these controllers (e.g. <code>Cluster</code>, <code>Machine</code>) call provider specific 
actuators to implement the behavior expected of the controller. Other 
controllers (e.g. <code>MachineSet</code>) are generic and operate by interacting with 
other Cluster API (and Kubernetes) resources.</p>
<p>The task of the provider implementor is to implement the actuator methods so 
that the shared controllers can call those methods when they must reconcile 
state and update status.</p>
<p>When an actuator function returns an error, if it is <a href="https://github.com/kubernetes-sigs/cluster-api/blob/fa906f36843b065c5294501efe7d78ebd85c3c04/pkg/controller/error/requeue_error.go#L27" target="_blank">RequeueAfterError</a> then the object will be
requeued for further processing after the given RequeueAfter time has
passed.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Architecture","level":"3.1","depth":1,"next":{"title":"Repository Layout","level":"3.2","depth":1,"path":"common_code/repository_layout.md","ref":"common_code/repository_layout.md","articles":[]},"previous":{"title":"Existing Providers","level":"2.1","depth":1,"path":"getting_started/existing_providers.md","ref":"getting_started/existing_providers.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-api","panel","sequence-diagrams","ga","codegroup","include-codeblock"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"panel":{},"search":{},"sequence-diagrams":{"theme":"simple"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"codegroup":{"defaultTabName":"Code","rememberTabs":"false","tabNameSeperator":"::"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"theme-api":{"languages":[],"split":true,"theme":"light"},"ga":{"configuration":"auto","token":"dew-create-me"},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"SIG Lifecycle Team","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"The Cluster API Book","gitbook":">= 3.0.0"},"file":{"path":"common_code/architecture.md","mtime":"2019-02-20T03:42:28.401Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-20T04:01:06.906Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-codegroup/code.group.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

